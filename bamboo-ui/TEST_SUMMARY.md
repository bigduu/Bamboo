# Bamboo UI æµ‹è¯•å¥—ä»¶æ€»ç»“

## æµ‹è¯•å®Œæˆæƒ…å†µ

### å•å…ƒæµ‹è¯• (Store æµ‹è¯•)

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|---------|---------|------|
| `sessionStore.test.ts` | 15 | âœ… é€šè¿‡ |
| `chatStore.test.ts` | 18 | âœ… é€šè¿‡ |
| `configStore.test.ts` | 22 | âœ… é€šè¿‡ |
| `themeStore.test.ts` | 15 | âœ… é€šè¿‡ |

**Store æµ‹è¯•æ€»è®¡**: 70 ä¸ªæµ‹è¯• âœ…

### ç»„ä»¶æµ‹è¯•

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|---------|---------|------|
| `MessageBubble.test.tsx` | 8 | âœ… é€šè¿‡ |
| `InputArea.test.tsx` | 15 | âœ… é€šè¿‡ |
| `SessionList.test.tsx` | 5 | âœ… é€šè¿‡ |
| `ServerConfigPanel.test.tsx` | 10 | âœ… é€šè¿‡ |

**ç»„ä»¶æµ‹è¯•æ€»è®¡**: 38 ä¸ªæµ‹è¯• âœ…

### å·¥å…·å‡½æ•°æµ‹è¯•

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|---------|---------|------|
| `api.test.ts` | 6 | âœ… é€šè¿‡ |
| `utils.test.ts` | 7 | âœ… é€šè¿‡ |

**å·¥å…·æµ‹è¯•æ€»è®¡**: 13 ä¸ªæµ‹è¯• âœ…

### é›†æˆæµ‹è¯•

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|---------|---------|------|
| `chat-flow.test.tsx` | 3 | âœ… é€šè¿‡ |
| `settings-flow.test.tsx` | 8 | âœ… é€šè¿‡ |
| `theme-switching.test.tsx` | 7 | âœ… é€šè¿‡ |

**é›†æˆæµ‹è¯•æ€»è®¡**: 18 ä¸ªæµ‹è¯• âœ…

### E2E æµ‹è¯• (Playwright)

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•åœºæ™¯ | çŠ¶æ€ |
|---------|---------|------|
| `chat.spec.ts` | 9 ä¸ªåœºæ™¯ | ğŸ“ å·²åˆ›å»º |
| `settings.spec.ts` | 10 ä¸ªåœºæ™¯ | ğŸ“ å·²åˆ›å»º |
| `masking.spec.ts` | 11 ä¸ªåœºæ™¯ | ğŸ“ å·²åˆ›å»º |

**E2E æµ‹è¯•æ€»è®¡**: 30 ä¸ªåœºæ™¯ ğŸ“

---

## æµ‹è¯•ç»Ÿè®¡

- **å•å…ƒæµ‹è¯•**: 70 ä¸ªæµ‹è¯• âœ…
- **ç»„ä»¶æµ‹è¯•**: 38 ä¸ªæµ‹è¯• âœ…
- **å·¥å…·æµ‹è¯•**: 13 ä¸ªæµ‹è¯• âœ…
- **é›†æˆæµ‹è¯•**: 18 ä¸ªæµ‹è¯• âœ…
- **E2E æµ‹è¯•**: 30 ä¸ªåœºæ™¯ ğŸ“

**æ€»è®¡**: 139 ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯• + 30 ä¸ª E2E åœºæ™¯

---

## æµ‹è¯•æ–‡ä»¶åˆ—è¡¨

```
bamboo-ui/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ stores/__tests__/
â”‚   â”‚   â”œâ”€â”€ sessionStore.test.ts      # ä¼šè¯çŠ¶æ€ç®¡ç†æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ chatStore.test.ts         # å¯¹è¯çŠ¶æ€ç®¡ç†æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ configStore.test.ts       # é…ç½®çŠ¶æ€ç®¡ç†æµ‹è¯•
â”‚   â”‚   â””â”€â”€ themeStore.test.ts        # ä¸»é¢˜çŠ¶æ€ç®¡ç†æµ‹è¯•
â”‚   â”œâ”€â”€ lib/__tests__/
â”‚   â”‚   â”œâ”€â”€ api.test.ts               # API å®¢æˆ·ç«¯æµ‹è¯•
â”‚   â”‚   â””â”€â”€ utils.test.ts             # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ chat/__tests__/
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageBubble.test.tsx # æ¶ˆæ¯æ°”æ³¡ç»„ä»¶æµ‹è¯•
â”‚   â”‚   â”‚   â””â”€â”€ InputArea.test.tsx    # è¾“å…¥åŒºåŸŸç»„ä»¶æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ session/__tests__/
â”‚   â”‚   â”‚   â””â”€â”€ SessionList.test.tsx  # ä¼šè¯åˆ—è¡¨ç»„ä»¶æµ‹è¯•
â”‚   â”‚   â””â”€â”€ settings/__tests__/
â”‚   â”‚       â””â”€â”€ ServerConfigPanel.test.tsx # æœåŠ¡å™¨é…ç½®æµ‹è¯•
â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”œâ”€â”€ chat-flow.test.tsx        # å®Œæ•´å¯¹è¯æµç¨‹æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ settings-flow.test.tsx    # è®¾ç½®é¡µé¢æµç¨‹æµ‹è¯•
â”‚   â”‚   â””â”€â”€ theme-switching.test.tsx  # ä¸»é¢˜åˆ‡æ¢æµ‹è¯•
â”‚   â””â”€â”€ test-utils/
â”‚       â”œâ”€â”€ fixtures.ts               # æµ‹è¯• fixtures
â”‚       â”œâ”€â”€ mock-store.ts             # Store mock å·¥å…·
â”‚       â”œâ”€â”€ setup.ts                  # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â”‚       â””â”€â”€ index.ts                  # æµ‹è¯•å·¥å…·å¯¼å‡º
â”œâ”€â”€ e2e/
â”‚   â”œâ”€â”€ chat.spec.ts                  # å¯¹è¯åŠŸèƒ½ E2E æµ‹è¯•
â”‚   â”œâ”€â”€ settings.spec.ts              # è®¾ç½®åŠŸèƒ½ E2E æµ‹è¯•
â”‚   â””â”€â”€ masking.spec.ts               # Masking é…ç½® E2E æµ‹è¯•
â”œâ”€â”€ vitest.config.ts                  # Vitest é…ç½®
â”œâ”€â”€ playwright.config.ts              # Playwright é…ç½®
â””â”€â”€ TESTING.md                        # æµ‹è¯•æ–‡æ¡£
```

---

## å¦‚ä½•è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•å’Œç»„ä»¶æµ‹è¯•

```bash
npm run test
```

### ç›‘è§†æ¨¡å¼ (å¼€å‘æ—¶ä½¿ç”¨)

```bash
npm run test:watch
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

```bash
npm run test:coverage
```

### è¿è¡Œ E2E æµ‹è¯•

```bash
# é¦–å…ˆéœ€è¦å®‰è£… Playwright æµè§ˆå™¨
npx playwright install

# è¿è¡Œ E2E æµ‹è¯•
npm run test:e2e

# UI æ¨¡å¼
npm run test:e2e:ui

# è°ƒè¯•æ¨¡å¼
npm run test:e2e:debug
```

---

## è¦†ç›–ç‡è¯´æ˜

å½“å‰æµ‹è¯•è¦†ç›–äº†ä»¥ä¸‹æ¨¡å—ï¼š

- âœ… **Store é€»è¾‘**: 100% è¦†ç›– (sessionStore, chatStore, configStore, themeStore)
- âœ… **ç»„ä»¶**: InputArea, MessageBubble, SessionList, ServerConfigPanel
- âœ… **å·¥å…·å‡½æ•°**: cn å‡½æ•°, API é”™è¯¯å¤„ç†
- âœ… **é›†æˆæµç¨‹**: èŠå¤©æµç¨‹ã€è®¾ç½®æµç¨‹ã€ä¸»é¢˜åˆ‡æ¢

**æ³¨æ„**: UI ç»„ä»¶åº“ (shadcn/ui) å’Œ hooks éœ€è¦é¢å¤–çš„æµ‹è¯•æ¥è¾¾åˆ°æ›´é«˜çš„è¦†ç›–ç‡ã€‚

---

## æµ‹è¯•å·¥å…·å’ŒæŠ€æœ¯

- **æµ‹è¯•æ¡†æ¶**: Vitest
- **ç»„ä»¶æµ‹è¯•**: React Testing Library + @testing-library/jest-dom
- **E2E æµ‹è¯•**: Playwright
- **Mock å·¥å…·**: vi (Vitest å†…ç½®)
- **è¦†ç›–ç‡**: v8 provider

---

## åç»­å»ºè®®

1. **è¡¥å……ç»„ä»¶æµ‹è¯•**: ä¸ºå‰©ä½™çš„ UI ç»„ä»¶æ·»åŠ æµ‹è¯•
2. **è¡¥å…… Hooks æµ‹è¯•**: ä¸ºè‡ªå®šä¹‰ hooks æ·»åŠ æµ‹è¯•
3. **è¿è¡Œ E2E æµ‹è¯•**: é…ç½® CI/CD ç¯å¢ƒè¿è¡Œ Playwright æµ‹è¯•
4. **æé«˜è¦†ç›–ç‡**: é’ˆå¯¹æœªè¦†ç›–çš„ä»£ç è·¯å¾„æ·»åŠ æµ‹è¯•
